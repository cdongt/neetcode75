# é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯

## ğŸš æè¿°
ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œè¿”å›æ•°ç»„ answer ï¼Œå…¶ä¸­ answer[i] ç­‰äº nums ä¸­é™¤ nums[i] ä¹‹å¤–å…¶ä½™å„å…ƒç´ çš„ä¹˜ç§¯ã€‚

é¢˜ç›®æ•°æ®ä¿è¯æ•°ç»„ numsä¹‹ä¸­ä»»æ„å…ƒç´ çš„å…¨éƒ¨å‰ç¼€å…ƒç´ å’Œåç¼€çš„ä¹˜ç§¯éƒ½åœ¨  32 ä½ æ•´æ•°èŒƒå›´å†…ã€‚è¯·ä¸è¦ä½¿ç”¨é™¤æ³•ï¼Œä¸”åœ¨ O(n) æ—¶é—´å¤æ‚åº¦å†…å®Œæˆæ­¤é¢˜ã€‚
<br>
<br>
 
## ğŸ›¶ è‡ªå†™
#### ğŸ§± æ€è·¯æ€»ç»“
ä¸åŒ…æ‹¬è‡ªèº«ï¼Œé‚£å°±æ˜¯å‰é¢ç´¯ä¹˜çš„ç»“æœ X åé¢ç´¯ä¹˜çš„ç»“æœï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š![ç´¯ä¹˜ç¤ºæ„å›¾](../attachments/238é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯.png)

- è®°å½•æ¯ä¸ª`nums`æ•°ç»„å‰ç´¯ä¹˜çš„ç»“æœï¼Œå’Œåç´¯ä¹˜çš„ç»“æœï¼Œç„¶åç›¸ä¹˜å³å¯å¾—åˆ°æœŸå¾…çš„ç»“æœ
- åˆ©ç”¨å‰éå†`nums`æ•°ç»„ï¼Œå¯ä»¥å¾—åˆ°å‰ç´¯ä¹˜çš„ç»“æœ
- åˆ©ç”¨åéå†`nums`æ•°ç»„ï¼Œå¯ä»¥å¾—åˆ°åç´¯ä¹˜çš„ç»“æœ

ä¸‹é¢çš„æ‰€æœ‰ä»£ç æœ¬è´¨ä¸Šéƒ½æ˜¯è¿™ä¸ªæ€è·¯ï¼Œåªæ˜¯åœ¨å­˜å‚¨çš„å‰ç´¯ä¹˜å’Œåç´¯ä¹˜çš„æ–¹æ³•æœ‰æ‰€ä¸åŒ

<br>
 
#### ğŸ– ä»£ç 


```
class Solution(object):
    def productExceptSelf(self, nums):
        """
        :type nums: List[int]
        :rtype: List[int]
        """
        prenums = [1]*len(nums)
        postnums = [1]*len(nums)
        res = []
        for i in range(0,len(nums)):
            if i == 0:
                prenums[i] = 1
            else:
                prenums[i] = nums[i-1] * prenums[i-1]

        for i in range(len(nums)-1,-1,-1):
            if i == len(nums)-1:
                postnums[i] = 1
            else:
                postnums[i] = nums[i+1] * postnums[i+1]
         
        for  i in range(len(nums)):
            res.append(prenums[i]*postnums[i])

        return res
```

 
<br>
<br>
<br>
 
## ğŸ›« å‚è€ƒ
#### ğŸŒ’ è§£é¢˜æ€è·¯ä¸€ï¼š

- å°†ç¬¬ä¸‰ä¸ªå¾ªç¯ä¸ç¬¬äºŒä¸ªå¾ªç¯åˆå¹¶åœ¨ä¸€èµ·,
- åˆ©ç”¨`prefix`å˜é‡è®°å½•å‰ç¼€ä¹˜ç§¯
- åˆ©ç”¨`postfix`å˜é‡è®°å½•åç¼€ä¹˜ç§¯

<br>

```
class Solution(object):
    def productExceptSelf(self, nums):
        """
        :type nums: List[int]
        :rtype: List[int]
        """
        prenums = [1]*len(nums)
        postnums = [1]*len(nums)
        res = [1]*len(nums)
        prefix = 1
        for i in range(0,len(nums)):
            prenums[i] = prefix
            prefix *= nums[i] 

        postfix = 1
        for i in range(len(nums)-1,-1,-1):
            postnums[i] = postfix
            postfix *= nums[i]
            res[i] = prenums[i] * postnums[i]
        return res
```

<br>
 
#### ğŸŒ“ è§£é¢˜æ€è·¯äºŒï¼š

- å‡å°‘ä¸¤ä¸ªè®°å½•å‰åç¼€çš„æ•°ç»„ï¼Œä»¥`resæ•°ç»„`ç›´æ¥è®°å½•

>- è®¡ç®—è¾“å…¥æ•°ç»„numsçš„æ¯ä¸ªå…ƒç´ å‰é¢æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯ï¼Œå­˜å‚¨åœ¨ç»“æœæ•°ç»„resä¸­ã€‚
>- ä½¿ç”¨ä¸€ä¸ªå˜é‡prefixæ¥è®°å½•å‰ç¼€ä¹˜ç§¯ï¼Œåˆå§‹å€¼ä¸º1ï¼Œéå†numsæ•°ç»„ï¼Œå°†prefixä¹˜ç§¯å­˜å‚¨>åœ¨resæ•°ç»„å¯¹åº”ä½ç½®ä¸Šï¼Œç„¶åå°†prefixä¹˜ä»¥å½“å‰å…ƒç´ å€¼ã€‚
>- è®¡ç®—è¾“å…¥æ•°ç»„numsçš„æ¯ä¸ªå…ƒç´ åé¢æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯ï¼Œå¹¶æ›´æ–°ç»“æœæ•°ç»„resã€‚
>- ä½¿ç”¨ä¸€ä¸ªå˜é‡postfixæ¥è®°å½•åç¼€ä¹˜ç§¯ï¼Œåˆå§‹å€¼ä¸º1ï¼Œä»numsæ•°ç»„æœ«å°¾å¼€å§‹éå†ï¼Œå°†postfixä¹˜ç§¯ä¸resæ•°ç»„å¯¹åº”ä½ç½®çš„å€¼ç›¸ä¹˜ï¼Œç„¶åå°†postfixä¹˜ä»¥å½“å‰å…ƒç´ å€¼ã€‚
>- æœ€åè¿”å›ç»“æœæ•°ç»„resultä½œä¸ºç­”æ¡ˆã€‚

<br>

```
class Solution:
    def productExceptSelf(self, nums: List[int]) -> List[int]:
        res = [1] * (len(nums))
        prefix = 1
        for i in range(len(nums)):
            res[i] = prefix
            prefix *= nums[i]
        postfix = 1
        for i in range(len(nums) - 1, -1, -1):
            res[i] *= postfix
            postfix *= nums[i]
        return res

```
<br>
 
#### ğŸŒ– è§£é¢˜æ€è·¯ä¸‰ï¼š
ä»Šå¤©çœ‹æœ‹å‹çš„ä»£ç ï¼Œåˆå­¦åˆ°äº†ä¸€ç§ç®€æ´çš„ä»£ç å†™æ³•ï¼Œæ€è·¯å’Œæ–¹æ³•äºŒä¸€æ ·ï¼š

```
class Solution(object):
    def productExceptSelf(self, nums):
        """
        :type nums: List[int]
        :rtype: List[int]
        """
        res = [1]
        prefix ,postfix = 1 , 1
        for i in range(len(nums)-1):
            prefix *= nums[i] 
            res.append(prefix)
        for i in range(len(nums)-1,0,-1):
            postfix *= nums[i]
            res[i-1] *= postfix
        return res
```
 
<br>
<br>
<br> 

 
 
## ğŸ é‡åˆ°çš„BUG
```
if i == 0:
    prenums[i] = 1
```
é”™è¯¯æç¤ºï¼š` IndexError: list assignment index out of range`
>åŸå› ï¼šlistæ˜¯ä¸€ä¸ªç©ºåˆ—è¡¨ï¼Œæ²¡æœ‰ä¸€ä¸ªå…ƒç´ ï¼Œè¿›è¡Œlist[0]å°±ä¼šå‡ºç°é”™è¯¯ï¼æ‰€ä»¥åˆ—è¡¨éœ€è¦è¿›è¡Œæå–æ“ä½œæ—¶è¦ä¿è¯ä¸ä¸ºç©ºï¼Œå®šä¹‰çš„æ—¶å€™æœ€å¥½æ˜¯`prenums = [1]*len(nums)`

<br>
<br>
<br>


## ğŸŒŠ åæ€ç¯èŠ‚
å¯¹äºç´¯ä¹˜ï¼Œä¸”éœ€è¦ç‰¹æ®Šè€ƒè™‘ä¸‹æ ‡ä¸º0å…ƒç´ çš„æƒ…å†µï¼Œå¯ä»¥åœ¨å¾ªç¯å¤–éƒ¨è®¾ç½®ä¸“é—¨è®°å½•ç´¯ä¹˜ç»“æœçš„å˜é‡ï¼Œä¸”åˆå§‹è®¾ç½®ä¸º1

 
<br>
<br>
<br>
 
## ğŸ” é‡åˆ·å¤ä¹ 
 
<br>
 
### ğŸ“… é‡åˆ·æ—¶é—´ï¼š2023/8/14
#### ğŸ– ä»£ç 
```
class Solution(object):
    def productExceptSelf(self, nums):
        """
        :type nums: List[int]
        :rtype: List[int]
        """
        rel = [1]
        pre,pone = 1,1
        for i in range(len(nums)-1):
            pre *= nums[i]
            rel.append(pre)
        for j in range(len(nums)-1,-1,-1):
            rel[j] *= pone
            pone *= nums[j]
        return rel
```
#### ğŸ¶ å¿ƒç†æ„Ÿå—
æ€»ä½“æ€è·¯æ²¡é—®é¢˜ï¼Œå‰åä¸¤æ¬¡éå†ï¼Œä½†æ˜¯ç¬¬äºŒæ¬¡éå†çš„æ—¶å€™è¦æ³¨æ„æ˜¯åˆ°-1ç»“æŸï¼Œå› ä¸ºæ¯ä¸ªä½ç½®éƒ½è¦å’Œåç´¯ä¹˜ç›¸ä¹˜ï¼Œæ‰€ä»¥å¿…é¡»æ˜¯`len(nums)-1 -> 0`ï¼Œè€Œ`range()`ä¸åŒ…æ‹¬ç»“å°¾ï¼Œæ‰€ä»¥æ˜¯-1ç»“æŸ
 
<br>